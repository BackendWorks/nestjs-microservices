_format_version: "2.1"
_transform: true

services:
  - name: auth-service
    host: auth
    port: 9001
    protocol: http
    routes:
      - name: auth-route
        paths:
          - /auth
  - name: post-service
    host: post
    port: 9002
    protocol: http
    routes:
      - name: post-route
        paths:
          - /post
  - name: files-service
    host: files
    port: 9003
    protocol: http
    routes:
      - name: files-route
        paths:
          - /files
  - name: notification-service
    host: notification
    port: 9004
    protocol: http
    routes:
      - name: notification-route
        paths:
          - /notification
plugins:
  - name: jwt
    service: post-service
    enabled: true
    config:
      key_claim_name: kid
      claims_to_verify:
        - exp
  - name: rate-limiting
    config:
      second: 5
      hour: 10000
      policy: local
consumers:
  - username: login_server_issuer
    jwt_secrets:
      - algorithm: HS256
        key: MKWeR0nu9OAUR9HrjpUG82Hbfz7ZXsIw
        secret: 6gkrxTKAraykMSpmnLNEGiEE3Yz8XL6U
